(this.webpackJsonppages=this.webpackJsonppages||[]).push([[0],{43:function(e,t,a){e.exports=a(76)},75:function(e,t,a){},76:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(18),c=a.n(s),l=a(16),o=a(13),u=a(4),i=a(2),p=a.n(i),m=a(9),d=a.n(m),f=a(39),E=a.n(f),g=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;return function(n){var r=E.a.v4();n({type:"SET_ALERT",payload:{msg:e,alertType:t,id:r}}),setTimeout((function(){return n({type:"REMOVE_ALERT",payload:r})}),a)}},h=function(e){e?d.a.defaults.headers.common["x-auth-token"]=e:delete d.a.defaults.headers.common["x-auth-token"]},b=function(){return function(e){var t;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return localStorage.token&&h(localStorage.token),a.prev=1,a.next=4,p.a.awrap(d.a.get("/api/auth"));case 4:t=a.sent,e({type:"USER_LOADED",payload:t.data}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),e({type:"AUTH_ERROR"});case 11:case"end":return a.stop()}}),null,null,[[1,8]])}},v=Object(u.b)((function(e){return{auth:e.auth}}),{logout:function(){return function(e){e({type:"LOGOUT"})}}})((function(e){var t=e.auth,a=t.isAuthenticated,s=t.loading,c=e.logout,o=r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{onClick:c,href:"#!"},r.a.createElement("i",{className:"fas fa-sign-out-alt"})," ",r.a.createElement("span",{className:"hide-sm"},"Logout")))),u=r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(l.b,{to:"/login"},"Admin Login")));return r.a.createElement("nav",{className:"navbar bg-dark"},r.a.createElement("h1",null,r.a.createElement(l.b,{to:"/"},r.a.createElement("i",{className:"fas fa-signature"})," Thankful Wall")),!s&&r.a.createElement(n.Fragment,null,a?o:u," "))})),y=a(15),O=a(3),S=a(20),k=Object(u.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{login:function(e,t){return function(a){var n,r,s,c;return p.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return n={headers:{"Content-Type":"application/json"}},r=JSON.stringify({email:e,password:t}),l.prev=2,l.next=5,p.a.awrap(d.a.post("/api/auth",r,n));case 5:s=l.sent,a({type:"LOGIN_SUCCESS",payload:s.data}),a(b()),l.next=15;break;case 10:l.prev=10,l.t0=l.catch(2),(c=l.t0.response.data.errors)&&c.forEach((function(e){return a(g(e.msg,"danger"))})),a({type:"LOGIN_FAIL"});case 15:case"end":return l.stop()}}),null,null,[[2,10]])}}})((function(e){var t=e.login,a=e.isAuthenticated,s=Object(n.useState)({email:"",password:""}),c=Object(S.a)(s,2),l=c[0],u=c[1],i=l.email,m=l.password,d=function(e){return u(Object(O.a)({},l,Object(y.a)({},e.target.name,e.target.value)))};return a?r.a.createElement(o.a,{to:"/"}):r.a.createElement(n.Fragment,null,r.a.createElement("h1",{className:"large text-primary"},"Sign In"),r.a.createElement("p",{className:"lead"},r.a.createElement("i",{className:"fas fa-user"})," Sign into Your Account"),r.a.createElement("form",{className:"form",onSubmit:function(e){return function(e){return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:e.preventDefault(),t(i,m);case 2:case"end":return a.stop()}}))}(e)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"email",placeholder:"Email Address",name:"email",value:i,onChange:function(e){return d(e)},required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",placeholder:"Password",name:"password",minLength:"6",value:m,onChange:function(e){return d(e)}})),r.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Login"})))})),x=Object(u.b)((function(e){return{alerts:e.alert}}))((function(e){var t=e.alerts;return null!==t&&t.length>0&&t.map((function(e){return r.a.createElement("div",{key:e.id,className:"alert alert-".concat(e.alertType)},e.msg)}))})),T=function(){return r.a.createElement(n.Fragment,null,r.a.createElement("h1",null,"Loading..."))},w=a(41),j=a.n(w),R=function(e){var t=e.addLike,a=e.removeLike,s=e.deletePost,c=e.auth,l=e.post,o=l._id,u=l.text,i=l.name,p=l.likes,m=l.date,d=e.showActions;return r.a.createElement("div",{class:"post bg-white p-1 my-1"},r.a.createElement("div",null,r.a.createElement("p",null,u),r.a.createElement("p",{class:"my-1 post-date"},i," | ","Posted on ",r.a.createElement(j.a,{format:"YYYY/MM/DD"},m)),d&&r.a.createElement(n.Fragment,null,r.a.createElement("button",{onClick:function(e){return t(o)},type:"button",class:"btn btn-light"},r.a.createElement("i",{class:"fas fa-thumbs-up"})," ",p.length>0&&r.a.createElement("span",null,p.length)),r.a.createElement("button",{onClick:function(e){return a(o)},type:"button",class:"btn btn-light"},r.a.createElement("i",{class:"fas fa-thumbs-down"})),!c.loading&&c.isAuthenticated&&r.a.createElement("button",{onClick:function(e){return s(o)},type:"button",class:"btn btn-danger"},r.a.createElement("i",{class:"fas fa-times"})))))};R.defaultProps={showActions:!0};var _=Object(u.b)((function(e){return{auth:e.auth}}),{addLike:function(e){return function(t){var a;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,p.a.awrap(d.a.put("/api/posts/like/".concat(e)));case 3:a=n.sent,t({type:"UPDATE_LIKES",payload:{postId:e,likes:a.data}}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),t({type:"POST_ERROR",payload:{msg:n.t0.response.data.msg,status:n.t0.response.status}});case 10:case"end":return n.stop()}}),null,null,[[0,7]])}},removeLike:function(e){return function(t){var a;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,p.a.awrap(d.a.put("/api/posts/unlike/".concat(e)));case 3:a=n.sent,t({type:"UPDATE_LIKES",payload:{postId:e,likes:a.data}}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),t({type:"POST_ERROR",payload:{msg:n.t0.response.data.msg,status:n.t0.response.status}});case 10:case"end":return n.stop()}}),null,null,[[0,7]])}},deletePost:function(e){return function(t){return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,p.a.awrap(d.a.delete("/api/posts/".concat(e)));case 3:t({type:"DELETE_POST",payload:e}),t(g("Post Removed","success")),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),t({type:"POST_ERROR",payload:{msg:a.t0.response.data.msg,status:a.t0.response.status}});case 10:case"end":return a.stop()}}),null,null,[[0,7]])}}})(R),A=Object(u.b)(null,{addPost:function(e,t){return function(a){var n,r,s;return p.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return n={headers:{"Content-Type":"application/json"}},r=JSON.stringify({text:e,name:t}),c.prev=2,c.next=5,p.a.awrap(d.a.post("/api/posts/",r,n));case 5:s=c.sent,a({type:"ADD_POST",payload:s.data}),a(g("Post Created","success")),c.next=13;break;case 10:c.prev=10,c.t0=c.catch(2),a({type:"POST_ERROR",payload:{msg:c.t0.response.data.msg,status:c.t0.response.status}});case 13:case"end":return c.stop()}}),null,null,[[2,10]])}}})((function(e){var t=e.addPost,a=Object(n.useState)({text:"",name:""}),s=Object(S.a)(a,2),c=s[0],l=s[1],o=c.text,u=c.name;return r.a.createElement("div",{class:"post-form"},r.a.createElement("form",{class:"form my-1",onSubmit:function(e){e.preventDefault(),t(o,u),l({text:"",name:""})}},r.a.createElement("textarea",{name:"text",cols:"30",rows:"5",placeholder:"What are some things you are thankful for today?",value:o,onChange:function(e){return l(Object(O.a)({},c,Object(y.a)({},e.target.name,e.target.value)))},required:!0}),r.a.createElement("textarea",{name:"name",cols:"30",rows:"1",placeholder:"Optional Name",value:u,onChange:function(e){return l(Object(O.a)({},c,Object(y.a)({},e.target.name,e.target.value)))}}),r.a.createElement("input",{type:"submit",class:"btn btn-dark my-1",value:"Submit"})))})),L=Object(u.b)((function(e){return{wall:e.wall}}),{getPosts:function(){return function(e){var t;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,p.a.awrap(d.a.get("/api/posts"));case 3:t=a.sent,e({type:"GET_POSTS",payload:t.data}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),e({type:"POST_ERROR",payload:{msg:a.t0.response.data.msg,status:a.t0.response.status}});case 10:case"end":return a.stop()}}),null,null,[[0,7]])}}})((function(e){var t=e.getPosts,a=e.wall,s=a.posts,c=a.loading;return Object(n.useEffect)((function(){t()}),[t]),c?r.a.createElement(T,null):r.a.createElement(n.Fragment,null,r.a.createElement("h1",{className:"large text-primary"},"Posts"),r.a.createElement("p",{className:"lead"},r.a.createElement("i",{className:"fas fa-hand-peace"})," Welcome!"),r.a.createElement(A,null),r.a.createElement("div",{className:"posts"},s.map((function(e){return r.a.createElement(_,{key:e._id,post:e})}))))})),P=a(14),N=a(42),D=a(21),C=[],I={token:localStorage.getItem("token"),isAuthenticated:null,loading:!0,user:null},U={posts:[],loading:!0,error:{}},F=Object(P.c)({alert:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"SET_ALERT":return[].concat(Object(D.a)(e),[t.payload]);case"REMOVE_ALERT":return e.filter((function(e){return e.id!==n}));default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"USER_LOADED":return Object(O.a)({},e,{isAuthenticated:!0,loading:!1,user:n});case"LOGIN_SUCCESS":return localStorage.setItem("token",n.token),Object(O.a)({},e,{},n,{isAuthenticated:!0,loading:!1});case"AUTH_ERROR":case"LOGIN_FAIL":case"LOGOUT":case"ACCOUNT_DELETED":return localStorage.removeItem("token"),Object(O.a)({},e,{token:null,isAuthenticated:!1,loading:!1});default:return e}},wall:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"GET_POSTS":return Object(O.a)({},e,{posts:n,loading:!1});case"ADD_POST":return Object(O.a)({},e,{posts:[n].concat(Object(D.a)(e.posts)),loading:!1});case"DELETE_POST":return Object(O.a)({},e,{posts:e.posts.filter((function(e){return e._id!==n})),loading:!1});case"POST_ERROR":return Object(O.a)({},e,{error:n,loading:!1});case"UPDATE_LIKES":return Object(O.a)({},e,{posts:e.posts.map((function(e){return e._id===n.postId?Object(O.a)({},e,{likes:n.likes}):e})),loading:!1});default:return e}}}),G=[N.a],Y=Object(P.d)(F,{},P.a.apply(void 0,G));a(75);localStorage.token&&h(localStorage.token);var J=function(){return Object(n.useEffect)((function(){Y.dispatch(b())}),[]),r.a.createElement(u.a,{store:Y},r.a.createElement(l.a,null,r.a.createElement(n.Fragment,null,r.a.createElement(v,null),r.a.createElement("section",{className:"container"},r.a.createElement(x,null),r.a.createElement(o.d,null,r.a.createElement(o.b,{exact:!0,path:"/",component:L}),r.a.createElement(o.b,{exact:!0,path:"/login",component:k}))))))};c.a.render(r.a.createElement(J,null),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.cef1e7cf.chunk.js.map